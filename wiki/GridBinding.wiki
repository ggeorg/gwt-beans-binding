#summary Using GWT Beans Binding with Grid

= Introduction =

At the end of this page, you'll have an application that contains a Grid. The Grid is filled with data from a java.util.List. Whenever you select a row in the Grid, the TextBox(es) below the Grid are filled with the data from the currently selected row, and of course you can edit the selected row data:

http://gwt-beans-binding.googlecode.com/svn/wiki/grid-binding1.png

= Construct the Model =

First, we create the Java Bean that extends AbstractBean:

{{{
  public class User extends AbstractBean {
    private int id;
    private String firstName;
    private String lastName;

    public User() {
      // Nothing to do here!
    }

    public User(int id, String firstName, String lastName) {
      super();
      this.id = id;
      this.firstName = firstName;
      this.lastName = lastName;
    }

    public int getId() {
      return id;
    }

    public void setId(int id) {
      int oldValue = this.id;
      this.id = id;
      firePropertyChange("id", oldValue, this.id);
    }

    public String getFirstName() {
      return firstName;
    }

    public void setFirstName(String firstName) {
      String oldValue = this.firstName;
      this.firstName = firstName;
      firePropertyChange("firstName", oldValue, this.firstName);
    }

    public String getLastName() {
      return lastName;
    }

    public void setLastName(String lastName) {
      String oldValue = this.lastName;
      this.lastName = lastName;
      firePropertyChange("lastName", oldValue, this.lastName);
    }
  }
}}}

Our model looks like:

{{{
    final List<User> users = ObservableCollections.observableList(new ArrayList<User>());
    users.add(new User(1, "George", "Georgopoulos"));
    users.add(new User(2, "Maria", "Matsouka"));
    users.add(new User(3, "Evi", "Matsouka"));
    users.add(new User(4, "Davidoula", "Georgopoulou"));
}}}

_Note that, ObservableCollections provides factory methods for creating observable lists and maps, that notify listeners of changes to the observable collection._

= Bind the Model to the View =

Here is the code to create the UI and the bindings to the model:

{{{
import java.util.ArrayList;
import java.util.List;

import org.gwt.beansbinding.core.client.BeanProperty;
import org.gwt.beansbinding.core.client.AutoBinding.UpdateStrategy;
import org.gwt.beansbinding.core.client.util.AbstractBean;
import org.gwt.beansbinding.core.client.util.GWTBeansBinding;
import org.gwt.beansbinding.observablecollections.client.ObservableCollections;
import org.gwt.beansbinding.ui.client.GWTBindings;
import org.gwt.beansbinding.ui.client.GridBinding;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.user.client.ui.FlowPanel;
import com.google.gwt.user.client.ui.Grid;
import com.google.gwt.user.client.ui.RootPanel;

public class Test implements EntryPoint {

  static {
    GWTBeansBinding.init();
  }

  public class User extends AbstractBean {
    private int id;
    private String firstName;
    private String lastName;

    public User() {
      // Nothing to do here!
    }

    public User(int id, String firstName, String lastName) {
      super();
      this.id = id;
      this.firstName = firstName;
      this.lastName = lastName;
    }

    public int getId() {
      return id;
    }

    public void setId(int id) {
      int oldValue = this.id;
      this.id = id;
      firePropertyChange("id", oldValue, this.id);
    }

    public String getFirstName() {
      return firstName;
    }

    public void setFirstName(String firstName) {
      String oldValue = this.firstName;
      this.firstName = firstName;
      firePropertyChange("firstName", oldValue, this.firstName);
    }

    public String getLastName() {
      return lastName;
    }

    public void setLastName(String lastName) {
      String oldValue = this.lastName;
      this.lastName = lastName;
      firePropertyChange("lastName", oldValue, this.lastName);
    }
  }

  public void onModuleLoad() {
    final List<User> users = ObservableCollections.observableList(new ArrayList<User>());
    users.add(new User(1, "George", "Georgopoulos"));
    users.add(new User(2, "Maria", "Matsouka"));
    users.add(new User(3, "Evi", "Matsouka"));
    users.add(new User(4, "Davidoula", "Georgopoulou"));

    final Grid grid = new Grid();
    grid.setCellSpacing(0);
    grid.setBorderWidth(1);

    GridBinding<User, List<User>, Grid> gridBinding = GWTBindings.createGridBinding(
        UpdateStrategy.READ, users, grid);

    // define the property to be used to derive list elements
    BeanProperty<User, Integer> idP = BeanProperty.create("id");
    BeanProperty<User, String> firstNameP = BeanProperty.create("firstName");
    BeanProperty<User, String> lastNameP = BeanProperty.create("lastName");

    // add the detail binding
    gridBinding.addColumnBinding(idP);
    gridBinding.addColumnBinding(firstNameP);
    gridBinding.addColumnBinding(lastNameP);

    gridBinding.bind();

    FlowPanel panel = new FlowPanel();
    panel.add(grid);

    RootPanel.get().add(panel, 10, 10);
  }
}
}}}

It looks like this:

http://gwt-beans-binding.googlecode.com/svn/wiki/grid-binding2.png

GridBinding binds a java.util.List of objects to act as the rows of a GWT Grid widget. Each object in the source List represents one row in the Grid. Mappings from properties of the source objects to columns are created by adding ColumnBinding(s) to a GridBinding instance.

= Bind to the selection of a Grid =

In addition to binding the elements of a Grid, it is possible to bind to the selection of a Grid. When binding to the selection of a Grid backed by a GridBinding, the selection is always in terms of elements from the source List.

Before a bind to the selection of a Grid, lets add a simple selection model to the Grid similar to the [http://gwt.google.com/samples/Mail/Mail.html Mail] example application:

{{{

}}}